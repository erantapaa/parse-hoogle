-- Hoogle documentation, generated by Haddock
-- See Hoogle, http://www.haskell.org/hoogle/


-- | Push metrics to a log file.
--   
--   This library lets you push system metrics to a log file.
@package ekg-log
@version 0.1.0.3


-- | This module lets you periodically flush metrics to a log file that
--   automatically rotates itself.
--   
--   <pre>
--   main = do
--       store &lt;- newStore
--       forkEkgLog defaultLogOptions store
--   </pre>
--   
--   You probably want to include some of the predefined metrics defined in
--   the ekg-core package, by calling e.g. the <tt>registerGcStats</tt>
--   function defined in that package.
module System.Local.Monitoring.Log

-- | A handle that can be used to control the log sync thread. Created by
--   <a>forkEkgLog</a>.
data Log

-- | The thread ID of the log sync thread. You can stop the sync by killing
--   this thread (i.e. by throwing it an asynchronous exception.)
logThreadId :: Log -> ThreadId

-- | Create a thread that periodically flushes the metrics in the store to
--   a log file.
forkEkgLog :: LogOptions -> Store -> IO Log

-- | Options to control whate log file to append to, when to rotate, and
--   how often to flush metrics. The flush interval should be shorter than
--   the flush interval.
data LogOptions
LogOptions :: !FilePath -> !Int -> !Bool -> !Text -> !Text -> LogOptions

-- | Server hostname or IP address
logfile :: LogOptions -> !FilePath

-- | Data push interval, in ms.
flushInterval :: LogOptions -> !Int

-- | Print debug output to stderr.
debug :: LogOptions -> !Bool

-- | Prefix to add to all metric names.
prefix :: LogOptions -> !Text

-- | Suffix to add to all metric names. This is particularly useful for
--   sending per application stats.
suffix :: LogOptions -> !Text

-- | Defaults:
--   
--   <ul>
--   <li><tt>logfile</tt> = <tt>"./ekg.log"</tt></li>
--   <li><tt>flushInterval</tt> = <tt>5000</tt></li>
--   <li><tt>debug</tt> = <tt>False</tt></li>
--   </ul>
defaultLogOptions :: LogOptions
