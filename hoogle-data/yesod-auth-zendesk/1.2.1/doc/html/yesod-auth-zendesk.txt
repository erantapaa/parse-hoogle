-- Hoogle documentation, generated by Haddock
-- See Hoogle, http://www.haskell.org/hoogle/


-- | Zendesk remote authentication support for Yesod apps.
--   
--   This package allows users of your website to login into Zendesk
--   automatically using Zendesk's remote authentication
--   (<a>http://www.zendesk.com/support/api/remote-authentication</a>).
--   
--   Note that this is an unusual <tt>yesod-auth-*</tt> package. We do not
--   define an <tt>AuthPlugin</tt> because the user can't log in to your
--   website via Zendesk (it's the opposite, they login in Zendesk via your
--   website). Instead, this plugin defines an Yesod subsite that you may
--   include on your site; the subsite defines a route that accepts
--   incoming users from Zendesk and authenticates them.
@package yesod-auth-zendesk
@version 1.2.1

module Yesod.Auth.Zendesk

-- | Type class that you need to implement in order to support Zendesk
--   remote authentication.
--   
--   <i>Minimal complete definition:</i> all functions are required.
class YesodAuthPersist site => YesodZendesk site
zendeskToken :: YesodZendesk site => site -> ByteString
zendeskAuthURL :: YesodZendesk site => site -> Text
zendeskUserInfo :: YesodZendesk site => HandlerT site IO ZendeskUser

-- | Information about a user that is given to <a>Zendesk</a>. Please see
--   Zendesk's documentation
--   (<a>http://www.zendesk.com/support/api/remote-authentication</a>) in
--   order to see more details of how theses fields are interpreted.
--   
--   Only <a>zuName</a> and <a>zuEmail</a> are required.
data ZendeskUser
ZendeskUser :: Text -> Text -> ZendeskExternalId -> Maybe Text -> [Text] -> Maybe Text -> ZendeskUser

-- | User name, at least two characters. (required)
zuName :: ZendeskUser -> Text

-- | E-mail address. (required)
zuEmail :: ZendeskUser -> Text

-- | An external (to Zendesk) ID that identifies this user. Defaults to
--   <a>UseYesodAuthId</a>.
zuExternalId :: ZendeskUser -> ZendeskExternalId

-- | Organization the user belongs to.
zuOrganization :: ZendeskUser -> Maybe Text

-- | List of tags.
zuTags :: ZendeskUser -> [Text]

-- | Public URL with the user's profile picture.
zuRemotePhotoURL :: ZendeskUser -> Maybe Text

-- | Which external ID should be given to Zendesk.
data ZendeskExternalId

-- | Use the user ID from <tt>persistent</tt>'s database. This is the
--   recommended and default value.
UseYesodAuthId :: ZendeskExternalId

-- | Use this given value.
Explicit :: Text -> ZendeskExternalId

-- | Do not give an external ID.
NoExternalId :: ZendeskExternalId

-- | Data type for <tt>yesod-auth-zendesk</tt>'s subsite.
data Zendesk

-- | Create a new <a>Zendesk</a>, use this on your <tt>config/routes</tt>
--   file.
getZendesk :: a -> Zendesk

-- | Redirect the user to Zendesk such that they're already logged in when
--   they arrive. For example, you may use <tt>zendeskLoginRoute</tt> when
--   the user clicks on a "Support" item on a menu.
zendeskLoginRoute :: Route Zendesk
instance Eq ZendeskExternalId
instance Ord ZendeskExternalId
instance Show ZendeskExternalId
instance Read ZendeskExternalId
instance Eq ZendeskUser
instance Ord ZendeskUser
instance Show ZendeskUser
instance Read ZendeskUser
instance YesodZendesk site => YesodSubDispatch Zendesk (HandlerT site IO)
instance Default ZendeskExternalId
instance Default ZendeskUser
