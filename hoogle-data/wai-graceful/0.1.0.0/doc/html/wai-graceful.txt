-- Hoogle documentation, generated by Haddock
-- See Hoogle, http://www.haskell.org/hoogle/


-- | Graceful shutdown for WAI applications.
--   
--   something here
@package wai-graceful
@version 0.1.0.0


-- | <pre>
--   app req = do
--       liftIO $ somethingImportant -- like threadDelay 100000000
--       LBSResponse status200 [("Content-Type", "text/plain")] "Finished!"
--   
--   main = do
--       gs &lt;- initGraceful
--   
--       forkIO $ run 8000 (graceful gs app)
--   
--       waitForTermination &gt;&gt; gracefulShutdown gs
--       putStrLn "Bye!"
--   </pre>
module Network.Wai.Graceful
initGraceful :: IO Graceful
data Graceful
Graceful :: MVar Int -> MVar Bool -> Graceful
activeConnections :: Graceful -> MVar Int
shutdownTrigger :: Graceful -> MVar Bool

-- | WAI Middleware that keeps track of active connections and blocks
--   further requests with HTTP503.
graceful :: Graceful -> Application -> Application

-- | Trigger shutdown and monitor progress.
gracefulShutdown :: Int -> Graceful -> IO ()

-- | Wait for TERM signal.
waitForTermination :: IO ()
